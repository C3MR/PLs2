# تقرير النظام النهائي - نظام AVAZ العقاري

## نظرة عامة
نظام AVAZ العقاري هو منصة شاملة لإدارة العقارات تتضمن واجهة عامة للعملاء ولوحة تحكم إدارية متقدمة.

## خريطة الموقع (Sitemap)

### الصفحات العامة
- **الرئيسية** (`/`) - صفحة الهبوط الرئيسية
- **عرض العقارات** (`/properties`) - عرض جميع العقارات المتاحة
- **تفاصيل العقار** (`/property/:id`) - صفحة تفاصيل عقار محدد
- **بوابة العملاء** (`/client-portal`) - بوابة دخول العملاء
- **تسجيل دخول العملاء** (`/client-login`) - صفحة تسجيل دخول العملاء
- **تسجيل دخول الموظفين** (`/employee-login`) - صفحة تسجيل دخول الموظفين
- **طلب عقار** (`/property-request`) - صفحة طلب عقار جديد

### بوابة العملاء
- **لوحة التحكم** - عرض البيانات الشخصية والطلبات
- **طلباتي** - إدارة طلبات العقارات
- **العقارات المحفوظة** - العقارات المفضلة

### لوحة التحكم الإدارية (`/dashboard`)
- **الرئيسية** (`/dashboard`) - لوحة المعلومات الرئيسية
- **إدارة العقارات** (`/dashboard/properties`) - إضافة وتعديل العقارات
- **إدارة العملاء** (`/dashboard/clients`) - إدارة بيانات العملاء
- **إدارة الطلبات** (`/dashboard/requests`) - متابعة طلبات العملاء
- **التقارير** (`/dashboard/reports`) - تقارير مفصلة عن النشاطات
- **التحليلات** (`/dashboard/analytics`) - إحصائيات ومقاييس الأداء
- **خريطة العقارات** (`/dashboard/map`) - عرض العقارات على الخريطة
- **المواعيد** (`/dashboard/appointments`) - إدارة المواعيد
- **الرسائل** (`/dashboard/messages`) - نظام المراسلة الداخلي
- **إدارة المكالمات** (`/dashboard/calls`) - سجل المكالمات
- **إدارة الأدوار** (`/dashboard/roles`) - إدارة أدوار المستخدمين
- **إدارة الملفات** (`/dashboard/files`) - نظام إدارة الملفات
- **إدارة المستخدمين** (`/dashboard/users`) - إدارة حسابات المستخدمين
- **إدارة الإشعارات** (`/dashboard/notifications`) - إدارة الإشعارات

## المواصفات التقنية

### الواجهة الأمامية (Frontend)
- **React 18.3.1** - مكتبة JavaScript للواجهات
- **TypeScript** - لغة البرمجة المطبوعة
- **Vite** - أداة البناء والتطوير
- **Tailwind CSS** - إطار عمل CSS للتصميم
- **Radix UI** - مكونات واجهة المستخدم
- **React Router Dom 6.30.1** - التنقل بين الصفحات
- **TanStack Query** - إدارة حالة البيانات
- **Lucide React** - مكتبة الأيقونات
- **React Hook Form** - إدارة النماذج
- **Zod** - التحقق من صحة البيانات

### قاعدة البيانات والخلفية (Backend)
- **Supabase** - منصة البيانات والمصادقة
- **PostgreSQL** - قاعدة البيانات العلائقية
- **Row Level Security (RLS)** - أمان على مستوى الصف
- **Supabase Auth** - نظام المصادقة والتفويض
- **Supabase Storage** - تخزين الملفات والصور

### الميزات الأمنية
- **نظام الأدوار والصلاحيات** - تحكم دقيق في الوصول
- **Row Level Security** - حماية البيانات على مستوى الصف
- **JWT Authentication** - مصادقة آمنة باستخدام الرموز
- **حماية CSRF** - حماية من هجمات التزوير

### إدارة الملفات
- **تخزين الصور** - bucket: property-images (عام)
- **تخزين المستندات** - bucket: property-documents (خاص)
- **ملفات العملاء** - bucket: client-files (خاص)
- **ملفات الإدارة** - bucket: admin-files (خاص)

## نظام الأدوار والصلاحيات

### الأدوار المتاحة
1. **مدير عام** (super_admin) - صلاحيات كاملة
2. **مدير** (admin) - إدارة العمليات والموظفين
3. **مدير مبيعات** (sales_manager) - إدارة فريق المبيعات
4. **موظف مبيعات** (sales_employee) - إدارة العقارات والعملاء
5. **موظف خدمة عملاء** (support_employee) - دعم العملاء
6. **محاسب** (accountant) - العمليات المالية
7. **عميل** (client) - الوصول لبوابة العملاء

### الصلاحيات المتاحة
- **users:read, users:create, users:update, users:delete** - إدارة المستخدمين
- **properties:read, properties:create, properties:update, properties:delete** - إدارة العقارات
- **clients:read, clients:create, clients:update, clients:delete** - إدارة العملاء
- **reports:read, reports:create** - الوصول للتقارير
- **files:read, files:upload, files:delete** - إدارة الملفات
- **roles:read, roles:assign** - إدارة الأدوار

## قوائم الموظفين المُعدة مسبقاً

### الحسابات الإدارية
1. **عبدالله السعيد** (EMP-001) - مدير عام
   - البريد: 3bd@avaz.sa
   - كلمة المرور: Ma@010203

2. **عمر الحيدري** (Em-002) - مدير عام
   - البريد: 3mr@avaz.sa
   - كلمة المرور: Ma@010203

3. **فهد الراشد** (EMP-003) - مدير مبيعات
   - البريد: fahd@avaz.sa
   - كلمة المرور: Ma@010203

4. **سارة الأحمد** (EMP-004) - موظفة مبيعات
   - البريد: sara@avaz.sa
   - كلمة المرور: Ma@010203

5. **محمد الخالد** (EMP-005) - موظف خدمة عملاء
   - البريد: mohamed@avaz.sa
   - كلمة المرور: Ma@010203

## التحديثات المطلوبة للأمان

### تحذيرات الأمان الحالية
1. **Function Search Path Mutable** - يجب تعيين search_path للدوال
2. **Leaked Password Protection Disabled** - يجب تفعيل حماية كلمات المرور المسربة

## حالة النظام الحالية
- ✅ النظام يعمل بدون أخطاء في وقت التشغيل
- ✅ جميع الصفحات والمسارات تعمل بشكل صحيح
- ✅ نظام المصادقة والتفويض مُفعل
- ✅ قاعدة البيانات مُعدة مع جميع الجداول والعلاقات
- ✅ حسابات الموظفين مُنشأة ومُفعلة
- ⚠️ تحديثات أمنية طفيفة مطلوبة

## التوصيات للنشر
1. معالجة التحذيرات الأمنية المذكورة أعلاه
2. اختبار شامل لجميع الوظائف على بيئة التطوير
3. إعداد نسخ احتياطية دورية لقاعدة البيانات
4. مراقبة الأداء والاستخدام بعد النشر
5. توثيق دليل المستخدم النهائي

---
*تم إنشاء هذا التقرير تلقائياً في: ${new Date().toLocaleDateString('ar-SA')}*